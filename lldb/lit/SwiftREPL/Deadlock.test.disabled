// RUN: %lldb --repl < %s | FileCheck %s

// From https://bugs.swift.org/browse/SR-7114
// This sequence was deadlocking.

let a = 9007199254740991.0
// CHECK: a: Double = 9007199254740991
(a * a - a * a).squareRoot()
// CHECK: (Double) = {
// CHECK-NEXT:  _value = 0
// CHECK-NEXT: }
(a * a).addingProduct(-a, a).squareRoot()
// CHECK: (Double) = {
// CHECK-NEXT:  _value = NaN
// CHECK-NEXT: }

// ******************** TEST 'LLDB :: SwiftREPL/Deadlock.test' FAILED ********************
// Script:
// --
// : 'RUN: at line 1';   /usr/local/google/home/burmako/swift-base/build/buildbot_linux/lldb-linux-x86_64/bin/lldb --no-lldbinit -S /usr/local/google/home/burmako/swift-base/build/buildbot_linux/lldb-linux-x86_64/lit/lit-lldb-init --repl < /usr/local/google/home/burmako/swift-base/llvm-project/lldb/lit/SwiftREPL/Deadlock.test | /usr/local/google/home/burmako/swift-base/build/buildbot_linux/llvm-linux-x86_64/bin/FileCheck /usr/local/google/home/burmako/swift-base/llvm-project/lldb/lit/SwiftREPL/Deadlock.test
// --
// Exit Code: 1
//
// Command Output (stderr):
// --
// error: failed to stop process at REPL breakpoint
// /usr/local/google/home/burmako/swift-base/llvm-project/lldb/lit/SwiftREPL/Deadlock.test:7:11: error: CHECK: expected string not found in input
// // CHECK: a: Double = 9007199254740991
//           ^
// <stdin>:1:1: note: scanning from here
// (lldb) command source -s 0 '/usr/local/google/home/burmako/swift-base/build/buildbot_linux/lldb-linux-x86_64/lit/lit-lldb-init'
// ^
// <stdin>:1:12: note: possible intended match here
// (lldb) command source -s 0 '/usr/local/google/home/burmako/swift-base/build/buildbot_linux/lldb-linux-x86_64/lit/lit-lldb-init'
//            ^
//
// --
